<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Mi Cuenta - Lumikay</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="cuenta.css">
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>
  <body>
  <script>
    const nombreGuardado = localStorage.getItem("usuarioActivo");
    if (!nombreGuardado) {
      alert("Debes iniciar sesión para acceder a tu cuenta.");
      window.location.href = "index.html";
    }
  </script>

  <!-- El resto de tu contenido -->

  <div class="top-banner">
  <div class="banner-text">
    <span>DELIVERY INMEDIATO | ENVÍOS A TODO LIMA</span>
    <span>DELIVERY INMEDIATO | ENVÍOS A TODO LIMA</span>
    <span>DELIVERY INMEDIATO | ENVÍOS A TODO LIMA</span>
    <span>DELIVERY INMEDIATO | ENVÍOS A TODO LIMA</span>
  </div>
</div>
<header>
  <div class="header-left">
    <button class="boton-busqueda">🔍 Buscar</button>
  </div>


  <div class="header-center">
    <a href="#"><img src="Logo.png" alt="Logo MiTienda" class="logo-img" /></a>
  </div>

  <div class="header-right">
    <a href="#" class="cuenta">Cuenta</a>
    <a href="#" class="carrito">🛒 Carrito</a>
  </div>
</header>
  <nav class="menu-secciones">
    <a href="index.html" class="boton-seccion">Inicio</a>
    <a href="comprar.html" class="boton-seccion">Comprar velas aromáticas</a>
    <a href="personalizador.html" class="boton-seccion">Personalizador de velas</a>
    <a href="contacto.html" class="boton-seccion">Contacto</a>
  </nav>

  <header class="cuenta-header">
    <div class="container">
      <h1>Mi Cuenta</h1>
    </div>
  </header>

  <main class="cuenta-main container">
    <!-- Sección de información del usuario -->
    <section class="cuenta-info">
    <h2>Bienvenido, <span class="nombre-usuario"></span></h2>
      <button id="cerrar-sesion" class="boton-cerrar-sesion">Cerrar sesión</button>
      <div class="tarjeta-usuario">
        <div>
          <strong>Puntos de afiliación:</strong>
          <span class="puntos">1,250</span>
        </div>
        <div>
          <strong>Correo:</strong>
          <span>adrian@gmail.com</span>
        </div>
        <div>
          <strong>Miembro desde:</strong>
          <span>Febrero 2025</span>
        </div>
      </div>
    </section>

    <!-- Cupones de descuento -->
    <section class="cuenta-cupones">
      <h3>Mis Cupones</h3>
      <ul class="cupones-lista">
        <li><strong>LUMI15:</strong> 15% de descuento - Válido hasta 31/08</li>
      </ul>
    </section>

    <!-- Compras recientes -->
    <section class="cuenta-compras">
      <h3>Compras Recientes</h3>
      <div class="compra-item">
        <p><strong>Vela Personalizada (Llama)</strong> - S/ 22.00</p>
        <p>Fecha: 03/07/2025</p>
        <p>Estado: <span class="estado entregado">Entregado</span></p>
      </div>
      <div class="compra-item">
        <p><strong>Pack Aromático (3 velas)</strong> - S/ 44.00</p>
        <p>Fecha: 21/06/2025</p>
        <p>Estado: <span class="estado en-proceso">En proceso</span></p>
      </div>
    </section>

    <!-- Código de Referido -->
<section class="cuenta-referido">
  <h3>Mi Código de Referido</h3>
  <div class="referido-box">
    <p>
    ¡Invita a tus amigos a unirse a Lumikay! <br>
    Comparte tu código con 5 personas y recibe <strong>5% de descuento en tu próxima compra</strong> cuando ellos realicen su primer pedido.
    </p>
    <div class="referido-codigo-contenedor">
      <input type="text" id="codigo-referido" value="LUMI-1234" readonly>
      <button id="copiar-referido" class="boton-carrito">Copiar</button>
    </div>
    <p id="mensaje-copiado" style="font-size: 0.9rem; color: green; display: none;">¡Código copiado!</p>
  </div>
</section>
  </main>

  <footer>
    <p>&copy; 2025 Lumikay - Todos los derechos reservados.</p>
  </footer>

<!-- Modal de Cuenta -->
<div id="modal-cuenta" class="modal oculto">
  <div class="modal-contenido">
    <span class="cerrar-modal" id="cerrar-cuenta">&times;</span>
    <h2>Iniciar Sesión</h2>
    <form id="form-cuenta">
      <label for="usuario">Usuario o Correo</label>
      <input type="text" id="usuario" name="usuario" required />

      <label for="contrasena">Contraseña</label>
      <input type="password" id="contrasena" name="contrasena" required />

      <button type="submit" class="boton-carrito">Iniciar Sesión</button>
    </form>
    <div class="extra-links">
      <a href="#">¿Olvidaste tu contraseña?</a> |
      <a href="#">Crear cuenta</a>
    </div>
  </div>
</div>


  <div id="modal-busqueda" class="modal oculto">
  <div class="modal-contenido">
    <span class="cerrar-modal" id="cerrar-busqueda">&times;</span>
    <input type="text" id="input-busqueda" placeholder="Buscar productos..." />
    <div id="resultados-busqueda"></div>
  </div>
</div>

<!-- Modal para detalles del producto desde la búsqueda -->
<div id="modal-detalle-busqueda" class="modal oculto">
  <div class="modal-contenido">
    <span class="cerrar-modal" id="cerrar-detalle-busqueda">&times;</span>
    <img id="detalle-imagen" src="" alt="" />
    <h3 id="detalle-titulo"></h3>
    <p class="precio" id="detalle-precio"></p>
    <p class="descripcion" id="detalle-descripcion"></p>
  </div>
</div>

<a href="https://wa.me/51933848345" 
   class="boton-wsp" 
   target="_blank" 
   title="Contáctanos por WhatsApp">
  <img src="WhatsApp.png" alt="WhatsApp" />
</a>
<!-- Carrito (modal mejorado) -->
<div id="carrito-modal" class="modal oculto">
  <div class="modal-contenido">
    <span class="cerrar-modal" id="cerrar-carrito">&times;</span>
    <h2>Tu Carrito</h2>
    
    <div id="carrito-items"></div>
    
    <!-- Campo para el código de descuento -->
    <div class="carrito-cupon">
      <input type="text" id="cupon-input" placeholder="Código de descuento" />
      <button id="aplicar-cupon" class="boton-carrito">Aplicar</button>
      <p id="cupon-mensaje" style="color: green; margin-top: 0.5em;"></p>
    </div>
    
    <!-- Total del carrito -->
    <div class="carrito-total">
      <strong>Total: S/ <span id="carrito-total">0.00</span></strong>
    </div>

    <button class="boton-carrito" id="finalizar-compra">Finalizar compra</button>
  </div>
</div>
<div id="notificacion-contenedor"></div>
  <script>
  document.addEventListener("DOMContentLoaded", () => {
    const nombreSpan = document.querySelector(".nombre-usuario");
    const cerrarSesionBtn = document.getElementById("cerrar-sesion");

    const nombreGuardado = localStorage.getItem("usuarioActivo");

    // Redirigir si no hay sesión activa
    if (!nombreGuardado) {
      window.location.href = "index.html";
    }

    // Mostrar nombre guardado
    if (nombreSpan && nombreGuardado) {
      nombreSpan.textContent = nombreGuardado;
    }

    // Cerrar sesión
    cerrarSesionBtn?.addEventListener("click", () => {
      localStorage.removeItem("usuarioActivo");
      window.location.href = "index.html";
    });
  });
  </script>
  <script src="script.js"></script>
</body>
</html>
